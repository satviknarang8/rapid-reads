<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rapid Reads - Inverse Reading Augmentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            color: #1a1a1a;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 20px 32px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .header p {
            font-size: 13px;
            opacity: 0.9;
        }
        
        /* Main Layout */
        .main-layout {
            display: flex;
            flex: 1;
            overflow: hidden;
            background: white;
        }
        
        /* Left Panel - LLM Response */
        .response-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            border-right: 2px solid #e5e7eb;
            max-width: 50%;
        }
        
        .panel-header {
            padding: 16px 24px;
            background: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .panel-title {
            font-size: 15px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }
        
        .question-text {
            font-size: 13px;
            color: #6b7280;
            font-style: italic;
            margin-top: 8px;
            padding: 8px;
            background: white;
            border-left: 3px solid #6366f1;
            border-radius: 4px;
        }
        
        .response-content {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
        }
        
        /* Claim Items */
        .claim {
            margin-bottom: 20px;
            padding: 16px;
            background: #f9fafb;
            border-radius: 8px;
            border-left: 4px solid #d1d5db;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .claim:hover {
            background: #f3f4f6;
            border-left-color: #6366f1;
        }
        
        .claim.active {
            background: #eff6ff;
            border-left-color: #3b82f6;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);
        }
        
        .claim.verified {
            border-left-color: #10b981;
            background: #f0fdf4;
        }
        
        .claim.flagged {
            border-left-color: #f59e0b;
            background: #fffbeb;
        }
        
        .claim-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: #6366f1;
            color: white;
            border-radius: 50%;
            font-size: 12px;
            font-weight: 600;
            margin-right: 10px;
            flex-shrink: 0;
        }
        
        .claim-text {
            font-size: 14px;
            line-height: 1.6;
            color: #1f2937;
            margin-bottom: 12px;
        }
        
        /* Citation Links */
        .citations {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }
        
        .citation-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            font-size: 12px;
            color: #6366f1;
            text-decoration: none;
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .citation-link:hover {
            background: #eef2ff;
            border-color: #6366f1;
        }
        
        .citation-link.active {
            background: #6366f1;
            color: white;
            border-color: #6366f1;
        }
        
        .citation-icon {
            font-size: 14px;
        }
        
        /* Verification Controls */
        .claim-controls {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #e5e7eb;
        }
        
        .verify-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .verify-correct {
            background: #10b981;
            color: white;
        }
        
        .verify-correct:hover {
            background: #059669;
        }
        
        .verify-flag {
            background: #f59e0b;
            color: white;
        }
        
        .verify-flag:hover {
            background: #d97706;
        }
        
        /* Right Panel - Document View */
        .document-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #fafafa;
        }
        
        .document-content {
            flex: 1;
            overflow-y: auto;
            padding: 24px 32px;
        }
        
        /* Document Sections */
        .doc-section {
            margin-bottom: 32px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .doc-section.highlighted {
            border-color: #3b82f6;
            background: #eff6ff;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
        }
        
        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #6366f1;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .section-text {
            font-size: 14px;
            line-height: 1.8;
            color: #374151;
        }
        
        /* Highlighted Text Spans */
        .highlight {
            background: #fef3c7;
            padding: 2px 4px;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        
        .highlight:hover {
            background: #fde68a;
        }
        
        .highlight.active {
            background: #bfdbfe;
            font-weight: 500;
        }
        
        .highlight-marker {
            display: inline-block;
            width: 6px;
            height: 6px;
            background: #6366f1;
            border-radius: 50%;
            margin-left: 4px;
            vertical-align: middle;
        }
        
        /* Coverage Map */
        .coverage-indicator {
            padding: 12px 24px;
            background: white;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .coverage-label {
            font-size: 12px;
            color: #6b7280;
            font-weight: 500;
        }
        
        .coverage-bar {
            flex: 1;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            display: flex;
        }
        
        .coverage-segment {
            flex: 1;
            background: #e5e7eb;
            transition: all 0.3s;
        }
        
        .coverage-segment.used {
            background: #6366f1;
        }
        
        .coverage-segment.active {
            background: #3b82f6;
        }
        
        /* Stats */
        .stats-bar {
            display: flex;
            gap: 16px;
            padding: 12px 24px;
            background: white;
            border-top: 1px solid #e5e7eb;
        }
        
        .stat {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: #f9fafb;
            border-radius: 6px;
            font-size: 12px;
        }
        
        .stat-icon {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .stat.verified .stat-icon {
            background: #10b981;
        }
        
        .stat.pending .stat-icon {
            background: #d1d5db;
        }
        
        .stat.flagged .stat-icon {
            background: #f59e0b;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Rapid Reads</h1>
            <p>An augmentation for inverse reading that connects LLM responses directly to source material</p>
        </div>
        
        <!-- Main Content -->
        <div class="main-layout">
            <!-- Left Panel: LLM Response -->
            <div class="response-panel">
                <div class="panel-header">
                    <div class="panel-title">LLM Response with Citation Threads</div>
                    <div class="question-text">
                        <strong>Question 1:</strong> Who spilled the coffee? Use concepts from Chapter 9 to describe the sequence of inferences required.
                    </div>
                </div>
                
                <div class="response-content">
                    <div class="claim" data-claim="1" onclick="activateClaim(1)">
                        <div style="display: flex; align-items: start;">
                            <span class="claim-number">1</span>
                            <div style="flex: 1;">
                                <div class="claim-text">
                                    The reader must make a <strong>pronominal anaphora inference</strong> to determine that "he" refers to Will, not Ditto or Eleanor.
                                </div>
                                <div class="citations">
                                    <a class="citation-link" onclick="event.stopPropagation(); highlightSection('anaphora', 1)">
                                        <span class="citation-icon">ðŸ“„</span>
                                        <span>Pronominal Anaphora, p. 253</span>
                                    </a>
                                    <a class="citation-link" onclick="event.stopPropagation(); highlightSection('antecedent', 1)">
                                        <span class="citation-icon">ðŸ“„</span>
                                        <span>Antecedent Selection, p. 254</span>
                                    </a>
                                </div>
                                <div class="claim-controls">
                                    <button class="verify-btn verify-correct" onclick="event.stopPropagation(); verifyClaim(1, 'verified')">âœ“ Verified</button>
                                    <button class="verify-btn verify-flag" onclick="event.stopPropagation(); verifyClaim(1, 'flagged')">âš  Flag</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="claim" data-claim="2" onclick="activateClaim(2)">
                        <div style="display: flex; align-items: start;">
                            <span class="claim-number">2</span>
                            <div style="flex: 1;">
                                <div class="claim-text">
                                    This uses <strong>recency and grammatical role</strong>: Will was the most recent male subject mentioned in the immediately preceding clause.
                                </div>
                                <div class="citations">
                                    <a class="citation-link" onclick="event.stopPropagation(); highlightSection('antecedent', 2)">
                                        <span class="citation-icon">ðŸ“„</span>
                                        <span>Antecedent Selection, p. 254</span>
                                    </a>
                                </div>
                                <div class="claim-controls">
                                    <button class="verify-btn verify-correct" onclick="event.stopPropagation(); verifyClaim(2, 'verified')">âœ“ Verified</button>
                                    <button class="verify-btn verify-flag" onclick="event.stopPropagation(); verifyClaim(2, 'flagged')">âš  Flag</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="claim" data-claim="3" onclick="activateClaim(3)">
                        <div style="display: flex; align-items: start;">
                            <span class="claim-number">3</span>
                            <div style="flex: 1;">
                                <div class="claim-text">
                                    Next, the reader makes a <strong>bridging inference</strong> connecting "the keyboard" to "the laptop" mentioned in the previous sentence, understanding they're part of the same object.
                                </div>
                                <div class="citations">
                                    <a class="citation-link" onclick="event.stopPropagation(); highlightSection('bridging', 3)">
                                        <span class="citation-icon">ðŸ“„</span>
                                        <span>Bridging Inferences, p. 263-264</span>
                                    </a>
                                    <a class="citation-link" onclick="event.stopPropagation(); highlightSection('nominal', 3)">
                                        <span class="citation-icon">ðŸ“„</span>
                                        <span>Nominal Anaphora, p. 256</span>
                                    </a>
                                </div>
                                <div class="claim-controls">
                                    <button class="verify-btn verify-correct" onclick="event.stopPropagation(); verifyClaim(3, 'verified')">âœ“ Verified</button>
                                    <button class="verify-btn verify-flag" onclick="event.stopPropagation(); verifyClaim(3, 'flagged')">âš  Flag</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="claim" data-claim="4" onclick="activateClaim(4)">
                        <div style="display: flex; align-items: start;">
                            <span class="claim-number">4</span>
                            <div style="flex: 1;">
                                <div class="claim-text">
                                    The reader constructs a <strong>situation model</strong> of the office scene, tracking where each character is and what objects are present, allowing them to understand spatial relationships.
                                </div>
                                <div class="citations">
                                    <a class="citation-link" onclick="event.stopPropagation(); highlightSection('situation', 4)">
                                        <span class="citation-icon">ðŸ“„</span>
                                        <span>Situation Models, p. 269-271</span>
                                    </a>
                                </div>
                                <div class="claim-controls">
                                    <button class="verify-btn verify-correct" onclick="event.stopPropagation(); verifyClaim(4, 'verified')">âœ“ Verified</button>
                                    <button class="verify-btn verify-flag" onclick="event.stopPropagation(); verifyClaim(4, 'flagged')">âš  Flag</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="claim flagged" data-claim="5" onclick="activateClaim(5)">
                        <div style="display: flex; align-items: start;">
                            <span class="claim-number">5</span>
                            <div style="flex: 1;">
                                <div class="claim-text">
                                    The reader might also make an <strong>elaborative inference</strong> about typical office beverage containers, though this isn't strictly necessary for comprehension.
                                </div>
                                <div class="citations">
                                    <a class="citation-link" onclick="event.stopPropagation(); highlightSection('elaborative', 5)">
                                        <span class="citation-icon">ðŸ“„</span>
                                        <span>Elaborative Inferences, p. 265-267</span>
                                    </a>
                                </div>
                                <div class="claim-controls">
                                    <button class="verify-btn verify-flag" onclick="event.stopPropagation(); verifyClaim(5, 'flagged')">âš  Flagged - needs review</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="stats-bar">
                    <div class="stat verified">
                        <div class="stat-icon"></div>
                        <span id="verified-count">0 Verified</span>
                    </div>
                    <div class="stat pending">
                        <div class="stat-icon"></div>
                        <span id="pending-count">4 Pending</span>
                    </div>
                    <div class="stat flagged">
                        <div class="stat-icon"></div>
                        <span id="flagged-count">1 Flagged</span>
                    </div>
                </div>
            </div>
            
            <!-- Right Panel: Document -->
            <div class="document-panel">
                <div class="coverage-indicator">
                    <span class="coverage-label">Chapter Coverage</span>
                    <div class="coverage-bar">
                        <div class="coverage-segment used" data-section="0"></div>
                        <div class="coverage-segment used" data-section="1"></div>
                        <div class="coverage-segment" data-section="2"></div>
                        <div class="coverage-segment used" data-section="3"></div>
                        <div class="coverage-segment" data-section="4"></div>
                        <div class="coverage-segment" data-section="5"></div>
                        <div class="coverage-segment used" data-section="6"></div>
                        <div class="coverage-segment" data-section="7"></div>
                        <div class="coverage-segment used" data-section="8"></div>
                        <div class="coverage-segment" data-section="9"></div>
                    </div>
                    <span class="coverage-label">50%</span>
                </div>
                
                <div class="document-content">
                    <div class="doc-section" id="section-anaphora">
                        <div class="section-title">Pronominal Anaphora (p. 253)</div>
                        <div class="section-text">
                            <span class="highlight" data-ref="1">A third-person pronoun used in a text usually refers to an entity that has already been introduced in the text (which is termed anaphoric reference)<span class="highlight-marker"></span></span>. Such pronouns contribute to the coherence of a text; they help tie the sentences in a text together. <span class="highlight" data-ref="1">A reader's task upon encountering a pronoun is to determine what it refers to<span class="highlight-marker"></span></span>.
                        </div>
                    </div>
                    
                    <div class="doc-section" id="section-antecedent">
                        <div class="section-title">Antecedent Selection (p. 254)</div>
                        <div class="section-text">
                            When a pronoun has an antecedent in the text, the position and role of the antecedent can affect how a reader determines the referent of a pronoun. <span class="highlight" data-ref="1,2">Pronouns are read more easily when their antecedent is closer than when it is more distant in the text<span class="highlight-marker"></span></span>. <span class="highlight" data-ref="2">The most salient recent referent is typically the best candidate for pronoun resolution<span class="highlight-marker"></span></span>. <span class="highlight" data-ref="2">Readers use recency, salience, and grammatical role to determine antecedents<span class="highlight-marker"></span></span>.
                        </div>
                    </div>
                    
                    <div class="doc-section" id="section-nominal">
                        <div class="section-title">Nominal Anaphora (p. 256)</div>
                        <div class="section-text">
                            Noun phrases as well as pronouns can refer to previously introduced referents. <span class="highlight" data-ref="3">A definite noun phrase frequently refers to a previously mentioned entity, especially when the referent is not salient enough for a pronoun to refer to it<span class="highlight-marker"></span></span>. In contrast to pronouns, <span class="highlight" data-ref="3">a definite noun phrase can refer to an entity that a reader could be expected to have inferred<span class="highlight-marker"></span></span>.
                        </div>
                    </div>
                    
                    <div class="doc-section" id="section-bridging">
                        <div class="section-title">Bridging Inferences (p. 263-264)</div>
                        <div class="section-text">
                            <span class="highlight" data-ref="3">A bridging inference is made when something has to be added to the discourse model to tie a new proposition into the previous model. Without such an inference the text would lack coherence<span class="highlight-marker"></span></span>. Anaphoric inference is an example of a bridging inference; a reader has to figure out who "he" refers to in order to make sense of a sentence. <span class="highlight" data-ref="3">The reader has to "bridge" the gap to know what refers to what. This requires the reader to use background knowledge<span class="highlight-marker"></span></span>.
                        </div>
                    </div>
                    
                    <div class="doc-section" id="section-elaborative">
                        <div class="section-title">Elaborative Inferences (p. 265-267)</div>
                        <div class="section-text">
                            <span class="highlight" data-ref="5">Sometimes inferences are made even before they are needed to make a text coherent<span class="highlight-marker"></span></span>. As an example, when reading "Keith drove to London," readers construct a representation that includes a car even though no car was explicitly mentioned. <span class="highlight" data-ref="5">Such elaborative inferences are not always made. There may just be too many of them. Readers appear to be cautious and often wait until they must make an inference before they make it<span class="highlight-marker"></span></span>.
                        </div>
                    </div>
                    
                    <div class="doc-section" id="section-situation">
                        <div class="section-title">Situation Models (p. 269-271)</div>
                        <div class="section-text">
                            Many theorists argue that <span class="highlight" data-ref="4">constructing a mental representation of the situation or scenario that is described is the principal goal of reading<span class="highlight-marker"></span></span>. Such a mental representation is often referred to as a "mental model" or "situation model." <span class="highlight" data-ref="4">A situation model can represent the agents and objects that play roles in the situation. It can represent spatial relations among these agents and objects and it can represent visual and other sensory attributes<span class="highlight-marker"></span></span>.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentClaim = null;
        let currentSection = null;
        
        function activateClaim(claimNum) {
            // Deactivate all claims
            document.querySelectorAll('.claim').forEach(c => c.classList.remove('active'));
            
            // Activate clicked claim
            const claim = document.querySelector(`[data-claim="${claimNum}"]`);
            if (claim) {
                claim.classList.add('active');
                currentClaim = claimNum;
            }
            
            // Highlight all referenced text
            highlightReferencedText(claimNum);
        }
        
        function highlightSection(sectionId, claimNum) {
            // Remove all section highlights
            document.querySelectorAll('.doc-section').forEach(s => s.classList.remove('highlighted'));
            
            // Remove all citation link active states
            document.querySelectorAll('.citation-link').forEach(l => l.classList.remove('active'));
            
            // Highlight the section
            const section = document.getElementById(`section-${sectionId}`);
            if (section) {
                section.classList.add('highlighted');
                section.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            
            // Activate the citation link
            event.currentTarget.classList.add('active');
            
            // Update coverage map
            updateCoverageMap(sectionId);
        }
        
        function highlightReferencedText(claimNum) {
            // Remove all text highlights
            document.querySelectorAll('.highlight').forEach(h => h.classList.remove('active'));
            
            // Find and highlight all text that references this claim
            document.querySelectorAll('.highlight').forEach(h => {
                const refs = h.dataset.ref.split(',').map(r => parseInt(r.trim()));
                if (refs.includes(claimNum)) {
                    h.classList.add('active');
                }
            });
        }
        
        function updateCoverageMap(sectionId) {
            // This is simplified - in a real implementation you'd map section IDs to indices
            document.querySelectorAll('.coverage-segment').forEach(seg => {
                seg.classList.remove('active');
            });
        }
        
        function verifyClaim(claimNum, status) {
            const claim = document.querySelector(`[data-claim="${claimNum}"]`);
            
            // Remove existing status classes
            claim.classList.remove('verified', 'flagged');
            
            // Add new status
            if (status === 'verified') {
                claim.classList.add('verified');
            } else if (status === 'flagged') {
                claim.classList.add('flagged');
            }
            
            // Update stats
            updateStats();
        }
        
        function updateStats() {
            const verified = document.querySelectorAll('.claim.verified').length;
            const flagged = document.querySelectorAll('.claim.flagged').length;
            const total = document.querySelectorAll('.claim').length;
            const pending = total - verified - flagged;
            
            document.getElementById('verified-count').textContent = `${verified} Verified`;
            document.getElementById('flagged-count').textContent = `${flagged} Flagged`;
            document.getElementById('pending-count').textContent = `${pending} Pending`;
        }
        
        // Add click handlers to highlights
        document.querySelectorAll('.highlight').forEach(highlight => {
            highlight.addEventListener('click', function() {
                const refs = this.dataset.ref.split(',').map(r => parseInt(r.trim()));
                if (refs.length > 0) {
                    activateClaim(refs[0]);
                }
            });
        });
    </script>
</body>
</html>
